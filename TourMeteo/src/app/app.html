<div class="p-8 max-w-6xl mx-auto text-black">
  <h1 class="text-3xl font-bold mb-6 text-blue-600">Pr√©vision m√©t√©o cycliste</h1>
  
  <div class="mb-6 bg-white p-4 rounded-lg shadow">
    <input 
      type="text" 
      placeholder="Villes (s√©par√©es par virgule, ex: Montpellier, Paris, Lyon)" 
      #cityInput 
      class="border border-gray-300 rounded px-3 py-2 w-full mb-3" 
    />
    <input 
      type="date" 
      #dateInput 
      [value]="today"
      class="border border-gray-300 rounded px-3 py-2 w-full mb-3" 
    />
    <div class="mb-3">
      <label class="inline-flex items-center mr-4">
        <input type="checkbox" [checked]="showTemp" (change)="showTemp = !showTemp" class="mr-2" />
        <span>Temp√©rature</span>
      </label>
      <label class="inline-flex items-center mr-4">
        <input type="checkbox" [checked]="showWind" (change)="showWind = !showWind" class="mr-2" />
        <span>Vent</span>
      </label>
      <label class="inline-flex items-center">
        <input type="checkbox" [checked]="showSummary" (change)="showSummary = !showSummary" class="mr-2" />
        <span>M√©t√©o globale</span>
      </label>
    </div>
    <button 
      (click)="search(cityInput.value, dateInput.value)" 
      class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded font-semibold">
      Afficher la m√©t√©o
    </button>
  </div>

  <div *ngIf="loading" class="flex justify-center items-center my-8">
    <svg class="animate-spin h-8 w-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
    </svg>
    <span class="ml-3 text-blue-600 font-semibold">Chargement...</span>
  </div>
  <div *ngIf="meteo.length" class="overflow-x-auto bg-white rounded-lg shadow">
    <div class="p-4 text-blue-700 font-semibold text-center">Date s√©lectionn√©e : {{ selectedDate }}</div>
    <table class="min-w-full border-collapse">
      <thead class="bg-blue-50">
        <tr>
          <th class="border border-gray-300 px-4 py-2 text-left">Heure</th>
          <ng-container *ngFor="let ville of meteo">
            <th class="border border-gray-300 px-4 py-2 text-left">{{ ville.city }}</th>
          </ng-container>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngIf="meteo.length">
          <ng-container *ngFor="let hourObj of meteo[0]?.hourly; let i = index">
            <tr class="hover:bg-gray-50">
              <td class="border border-gray-300 px-4 py-2">{{ hourObj.hour }}h</td>
              <ng-container *ngFor="let ville of meteo">
                <td class="border border-gray-300 px-4 py-2">
                  <ng-container *ngIf="ville.hourly && ville.hourly[i]">
                    <div *ngIf="showTemp">üå°Ô∏è {{ ville.hourly[i].temperature }}¬∞C</div>
                    <div *ngIf="showWind">üí® {{ ville.hourly[i].wind }} km/h</div>
                    <div *ngIf="showSummary">
                      <ng-container *ngIf="ville.hourly[i].summary as code">
                        <ng-container [ngSwitch]="true">
                          <span>{{ getWeatherDescription(+code).emoji }}</span>
                          <span>{{ getWeatherDescription(+code).desc }}</span>
                        </ng-container>
                      </ng-container>
                    </div>
                  </ng-container>
                  <ng-container *ngIf="!ville.hourly || !ville.hourly[i]">-</ng-container>
                </td>
              </ng-container>
            </tr>
          </ng-container>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>
